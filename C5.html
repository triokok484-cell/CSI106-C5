<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√în T·∫≠p Ho√†n Ch·ªânh: Computer Organization</title>
    
    <style>
        :root {
            --primary-color: #0d6efd;
            --success-color: #198754;
            --danger-color: #dc3545;
            --light-bg-color: #f8f9fa;
            --border-color: #dee2e6;
            --text-color: #212529;
            --green-bg: #d1e7dd;
            --red-bg: #f8d7da;
            --highlight-bg: #fff3cd;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        #app-container {
            background-color: white;
            padding: 1.5em 2em;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
        }

        h1 { color: #0056b3; text-align: center; margin-top: 0; }
        .hidden { display: none; }
        
        /* --- B·ªë c·ª•c TAB --- */
        .tab-buttons {
            display: flex;
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 1.5em;
        }
        .tab-link {
            padding: 15px 25px;
            cursor: pointer;
            border: none;
            background-color: transparent;
            font-size: 1.1em;
            font-weight: 600;
            color: #6c757d;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        .tab-link.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        /* --- Ph·∫ßn L√Ω Thuy·∫øt --- */
        .tab-content { text-align: left; }
        #theory h3 {
            font-size: 1.3em;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 5px;
            margin-top: 25px;
        }
        #theory ul { padding-left: 20px; list-style-type: disc; }
        #theory li { margin-bottom: 10px; line-height: 1.6; }
        .conclusion {
            margin-top: 30px;
            padding: 15px;
            background-color: #e9ecef;
            border-left: 5px solid var(--success-color);
            border-radius: 8px;
            font-style: italic;
        }

        /* --- Ph·∫ßn Quiz --- */
        #practice { text-align: center; }
        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            margin: 5px;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }
        button:hover { opacity: 0.9; }
        button:active { transform: scale(0.98); }
        button:disabled { background-color: #cccccc; cursor: not-allowed; }

        #custom-question-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }
        #question-count-input { padding: 12px; border-radius: 8px; border: 2px solid var(--border-color); font-size: 16px; width: 100px; text-align: center; }
        #question-count-input:focus { outline: none; border-color: var(--primary-color); }
        #quiz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid #ddd; }
        #question-text { font-size: 1.25em; font-weight: bold; margin-bottom: 25px; line-height: 1.4; text-align: left; }
        .option { display: block; background-color: var(--light-bg-color); border: 2px solid var(--border-color); padding: 15px; margin-bottom: 12px; border-radius: 8px; cursor: pointer; transition: all 0.2s ease-in-out; text-align: left; }
        .option:hover { border-color: var(--primary-color); }
        .option.correct { background-color: var(--green-bg); border-color: var(--success-color); font-weight: bold; pointer-events: none; }
        .option.incorrect { background-color: var(--red-bg); border-color: var(--danger-color); font-weight: bold; pointer-events: none; }
        #options-container.answered .option:not(.correct):not(.incorrect) { opacity: 0.6; pointer-events: none; }
        #feedback-container { text-align: left; margin-top: 20px; }
        .memory-tip { font-style: italic; color: #6c757d; background: #e9ecef; padding: 15px; border-radius: 6px; margin-top: 15px; border-left: 4px solid var(--primary-color); }
        #next-btn { background-color: var(--success-color); }
        #results-screen { text-align: left; }
        .result-item { background: #fdfdff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px; }
        .user-answer.correct { color: var(--success-color); }
        .user-answer.incorrect { color: var(--danger-color); text-decoration: line-through;}
        .correct-answer { color: var(--success-color); font-weight: bold; }

    </style>
</head>
<body>
    <div id="app-container">
        <h1>Computer Organization</h1>
        
        <div class="tab-buttons">
            <button class="tab-link active" data-tab="theory">üìò L√Ω Thuy·∫øt</button>
            <button class="tab-link" data-tab="practice">üìù B√†i T·∫≠p</button>
        </div>

        <div id="theory" class="tab-content active">
            <h3>1. Ba H·ªá Th·ªëng Con C·ªßa M√°y T√≠nh</h3>
            <ul>
                [cite_start]<li><strong>CPU (Central Processing Unit)</strong>: Bao g·ªìm ALU (th·ª±c hi·ªán t√≠nh to√°n & logic), b·ªô ƒëi·ªÅu khi·ªÉn (Control Unit), v√† c√°c thanh ghi (Registers)[cite: 33].</li>
                [cite_start]<li><strong>Main Memory (B·ªô nh·ªõ ch√≠nh)</strong>: N∆°i l∆∞u tr·ªØ d·ªØ li·ªáu v√† ch∆∞∆°ng tr√¨nh ƒëang ch·∫°y[cite: 89]. G·ªìm c√≥:
                    <ul>
                        [cite_start]<li><strong>RAM</strong> (SRAM, DRAM): L√† b·ªô nh·ªõ kh·∫£ bi·∫øn (volatile), d·ªØ li·ªáu s·∫Ω m·∫•t khi m·∫•t ƒëi·ªán[cite: 145].</li>
                        [cite_start]<li><strong>ROM</strong> (PROM, EPROM, EEPROM): L√† b·ªô nh·ªõ b·∫•t bi·∫øn (non-volatile), kh√¥ng m·∫•t d·ªØ li·ªáu khi t·∫Øt m√°y[cite: 165].</li>
                    </ul>
                </li>
                [cite_start]<li><strong>I/O Subsystem (H·ªá th·ªëng Nh·∫≠p/Xu·∫•t)</strong>: Gi√∫p m√°y t√≠nh giao ti·∫øp v·ªõi th·∫ø gi·ªõi b√™n ngo√†i[cite: 229, 230]. [cite_start]G·ªìm thi·∫øt b·ªã l∆∞u tr·ªØ (ƒëƒ©a t·ª´, ƒëƒ©a quang) v√† phi l∆∞u tr·ªØ (b√†n ph√≠m, m√†n h√¨nh)[cite: 239].</li>
            </ul>

            <h3>2. B·ªô X·ª≠ L√Ω Trung T√¢m (CPU) Chi Ti·∫øt</h3>
            <ul>
                [cite_start]<li><strong>ALU</strong>: Th·ª±c hi·ªán c√°c ph√©p to√°n logic, d·ªãch chuy·ªÉn bit v√† s·ªë h·ªçc[cite: 53].</li>
                [cite_start]<li><strong>Registers</strong>: C√°c v·ªã tr√≠ l∆∞u tr·ªØ t·∫°m th·ªùi, t·ªëc ƒë·ªô cao ƒë·ªÉ ch·ª©a d·ªØ li·ªáu[cite: 63].
                    <ul>
                        [cite_start]<li><strong>Program Counter (PC)</strong>: Lu√¥n tr·ªè t·ªõi ƒë·ªãa ch·ªâ c·ªßa l·ªánh ti·∫øp theo s·∫Ω ƒë∆∞·ª£c th·ª±c thi[cite: 75].</li>
                        [cite_start]<li><strong>Instruction Register (IR)</strong>: Ch·ª©a l·ªánh ƒëang ƒë∆∞·ª£c gi·∫£i m√£ v√† th·ª±c thi[cite: 71].</li>
                    </ul>
                </li>
                [cite_start]<li><strong>Control Unit</strong>: ƒêi·ªÅu khi·ªÉn ho·∫°t ƒë·ªông c·ªßa CPU v√† c√°c b·ªô ph·∫≠n kh√°c[cite: 85].</li>
            </ul>

            <h3>3. B·ªô Nh·ªõ Ch√≠nh (Main Memory) Chi Ti·∫øt</h3>
            <ul>
                [cite_start]<li>G·ªìm nhi·ªÅu √¥ nh·ªõ, m·ªói √¥ c√≥ m·ªôt ƒë·ªãa ch·ªâ duy nh·∫•t ƒë·ªÉ ƒë·ªãnh danh[cite: 90].</li>
                [cite_start]<li><strong>Address Space</strong>: L√† t·ªïng s·ªë l∆∞·ª£ng √¥ nh·ªõ c√≥ th·ªÉ ƒë∆∞·ª£c ƒë·ªãnh danh m·ªôt c√°ch duy nh·∫•t[cite: 106].</li>
                [cite_start]<li><strong>Memory Hierarchy (H·ªá th·ªëng ph√¢n c·∫•p b·ªô nh·ªõ)</strong>: S·∫Øp x·∫øp b·ªô nh·ªõ theo th·ª© t·ª± t·ªëc ƒë·ªô gi·∫£m d·∫ßn v√† dung l∆∞·ª£ng tƒÉng d·∫ßn: Registers ‚Üí Cache ‚Üí Main Memory ‚Üí Secondary Storage[cite: 183, 184].</li>
            </ul>

            <h3>4. H·ªá Th·ªëng I/O v√† ƒê·ªãa Ch·ªâ H√≥a</h3>
            <ul>
                [cite_start]<li><strong>K·∫øt n·ªëi</strong>: C√°c thi·∫øt b·ªã I/O k·∫øt n·ªëi v·ªõi bus h·ªá th·ªëng th√¥ng qua c√°c b·ªô ƒëi·ªÅu khi·ªÉn (controller) nh∆∞ USB, FireWire, SCSI[cite: 500, 510].</li>
                [cite_start]<li><strong>ƒê·ªãa ch·ªâ h√≥a I/O</strong>: C√≥ hai ph∆∞∆°ng ph√°p ch√≠nh[cite: 613].
                    <ul>
                        [cite_start]<li><strong>Isolated I/O</strong>: S·ª≠ d·ª•ng c√°c l·ªánh ri√™ng bi·ªát ƒë·ªÉ ƒë·ªçc/ghi v·ªõi thi·∫øt b·ªã I/O, kh√°c v·ªõi l·ªánh truy c·∫≠p b·ªô nh·ªõ[cite: 615].</li>
                        [cite_start]<li><strong>Memory-mapped I/O</strong>: Coi c√°c thanh ghi c·ªßa thi·∫øt b·ªã I/O nh∆∞ nh·ªØng √¥ nh·ªõ, s·ª≠ d·ª•ng chung t·∫≠p l·ªánh truy c·∫≠p b·ªô nh·ªõ[cite: 637].</li>
                    </ul>
                </li>
            </ul>

            <h3>5. Li√™n K·∫øt H·ªá Th·ªëng Con</h3>
            <ul>
                [cite_start]<li>C√°c th√†nh ph·∫ßn ƒë∆∞·ª£c k·∫øt n·ªëi v·ªõi nhau qua h·ªá th·ªëng <strong>Bus</strong>[cite: 466].
                    <ul>
                        [cite_start]<li><strong>Data Bus</strong>: D√πng ƒë·ªÉ truy·ªÅn d·ªØ li·ªáu[cite: 475].</li>
                        [cite_start]<li><strong>Address Bus</strong>: D√πng ƒë·ªÉ truy·ªÅn ƒë·ªãa ch·ªâ √¥ nh·ªõ ho·∫∑c thi·∫øt b·ªã I/O[cite: 486].</li>
                        [cite_start]<li><strong>Control Bus</strong>: D√πng ƒë·ªÉ truy·ªÅn c√°c t√≠n hi·ªáu ƒëi·ªÅu khi·ªÉn v√† ƒë·ªìng b·ªô h√≥a[cite: 491].</li>
                    </ul>
                </li>
            </ul>

            <h3>6. Th·ª±c Thi Ch∆∞∆°ng Tr√¨nh</h3>
            <ul>
                [cite_start]<li><strong>Chu k·ª≥ m√°y (Machine Cycle)</strong>: L√† m·ªôt chu tr√¨nh l·∫∑p ƒëi l·∫∑p l·∫°i g·ªìm 3 b∆∞·ªõc[cite: 663, 664].
                    <ol>
                        [cite_start]<li><strong>Fetch</strong> ‚Äì N·∫°p l·ªánh t·ª´ b·ªô nh·ªõ v√†o thanh ghi IR[cite: 683].</li>
                        [cite_start]<li><strong>Decode</strong> ‚Äì Gi·∫£i m√£ l·ªánh trong IR[cite: 687].</li>
                        [cite_start]<li><strong>Execute</strong> ‚Äì Th·ª±c thi l·ªánh ƒë√£ gi·∫£i m√£[cite: 693].</li>
                    </ol>
                </li>
                [cite_start]<li><strong>ƒê·ªìng b·ªô CPU v√† I/O</strong>: C√≥ 3 ph∆∞∆°ng ph√°p ch√≠nh[cite: 697].
                    <ul>
                        [cite_start]<li><strong>Programmed I/O</strong>: CPU ph·∫£i ch·ªù thi·∫øt b·ªã I/O[cite: 699].</li>
                        [cite_start]<li><strong>Interrupt-driven I/O</strong>: Thi·∫øt b·ªã I/O ng·∫Øt (interrupt) CPU khi s·∫µn s√†ng[cite: 725].</li>
                        [cite_start]<li><strong>Direct Memory Access (DMA)</strong>: Cho ph√©p truy·ªÅn d·ªØ li·ªáu tr·ª±c ti·∫øp gi·ªØa I/O v√† b·ªô nh·ªõ m√† kh√¥ng c·∫ßn qua CPU[cite: 750, 751].</li>
                    </ul>
                </li>
            </ul>

            <h3>7. C√°c Ki·∫øn Tr√∫c M√°y T√≠nh</h3>
            <ul>
                [cite_start]<li><strong>CISC (Complex Instruction Set Computer)</strong>: C√≥ t·∫≠p l·ªánh l·ªõn v√† ph·ª©c t·∫°p, m·ªôt l·ªánh c√≥ th·ªÉ l√†m nhi·ªÅu vi·ªác[cite: 808, 809].</li>
                [cite_start]<li><strong>RISC (Reduced Instruction Set Computer)</strong>: C√≥ t·∫≠p l·ªánh nh·ªè, ƒë∆°n gi·∫£n, gi√∫p th·ª±c thi nhanh h∆°n[cite: 830].</li>
                [cite_start]<li><strong>Pipelining</strong>: Cho ph√©p c√°c giai ƒëo·∫°n c·ªßa nhi·ªÅu l·ªánh ƒë∆∞·ª£c x·ª≠ l√Ω g·ªëi ƒë·∫ßu, gi√∫p tƒÉng th√¥ng l∆∞·ª£ng (throughput)[cite: 837].</li>
                [cite_start]<li><strong>Parallel Processing (X·ª≠ l√Ω song song)</strong>: S·ª≠ d·ª•ng nhi·ªÅu ƒë∆°n v·ªã x·ª≠ l√Ω ƒë·ªÉ th·ª±c hi·ªán c√¥ng vi·ªác ƒë·ªìng th·ªùi, g·ªìm c√°c lo·∫°i nh∆∞ SIMD v√† MIMD[cite: 873].</li>
            </ul>
            
            <div class="conclusion">
                <p>‚úÖ <strong>K·∫øt lu·∫≠n</strong>: M√°y t√≠nh g·ªìm 3 h·ªá th·ªëng con (CPU, Memory, I/O), k·∫øt n·ªëi qua bus. CPU th·ª±c hi·ªán l·∫∑p l·∫°i chu k·ª≥ fetch‚Äìdecode‚Äìexecute ƒë·ªÉ ch·∫°y ch∆∞∆°ng tr√¨nh. C√°c ki·∫øn tr√∫c nh∆∞ CISC, RISC, c√πng v·ªõi c√°c k·ªπ thu·∫≠t nh∆∞ pipelining v√† x·ª≠ l√Ω song song, ƒë∆∞·ª£c ph√°t tri·ªÉn ƒë·ªÉ t·ªëi ∆∞u h√≥a hi·ªáu nƒÉng.</p>
            </div>
        </div>

        <div id="practice" class="tab-content hidden">
             <div id="start-screen">
                <h2>Ch·∫ø ƒë·ªô Luy·ªán t·∫≠p</h2>
                <p>Nh·∫≠p s·ªë c√¢u h·ªèi b·∫°n mu·ªën l√†m (t·ª´ 1 ƒë·∫øn 100), sau ƒë√≥ nh·∫•n B·∫Øt ƒë·∫ßu.</p>
                <div id="custom-question-container">
                    <input type="number" id="question-count-input" min="1" max="100" placeholder="VD: 20">
                    <button id="start-custom-quiz-btn">B·∫Øt ƒë·∫ßu</button>
                </div>
            </div>
    
            <div id="quiz-screen" class="hidden">
                <div id="quiz-header">
                    <p id="progress-text"></p>
                    <button id="submit-btn">N·ªôp b√†i</button>
                </div>
                <p id="question-text"></p>
                <div id="options-container"></div>
                <div id="feedback-container"></div>
                <div id="navigation-buttons">
                    <button id="next-btn" class="hidden">C√¢u ti·∫øp theo</button>
                </div>
            </div>
    
            <div id="results-screen" class="hidden">
                <h2>K·∫øt qu·∫£ b√†i l√†m</h2>
                <p id="score-text"></p>
                <button id="restart-btn">L√†m l·∫°i t·ª´ ƒë·∫ßu</button>
                <div id="results-details"></div>
            </div>
        </div>
    </div>
    
    <div id="google_translate_element" style="position: fixed; bottom: 10px; right: 10px; z-index: 1000;"></div>
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <script>
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({pageLanguage: 'vi', layout: google.translate.TranslateElement.InlineLayout.SIMPLE}, 'google_translate_element');
        }

        document.addEventListener('DOMContentLoaded', () => {
            // --- Ng√¢n h√†ng c√¢u h·ªèi (100 c√¢u) ---
            const questionBank = [];
            const sampleQuestions = [
                { question: "Ba h·ªá th·ªëng con (subsystems) ch√≠nh c·∫•u t·∫°o n√™n m·ªôt m√°y t√≠nh l√† g√¨?", options: ["CPU, B√†n ph√≠m, M√†n h√¨nh", "CPU, B·ªô nh·ªõ ch√≠nh, H·ªá th·ªëng I/O", "ALU, Control Unit, RAM", "·ªî c·ª©ng, RAM, Chu·ªôt"], answer: 1, tip: "H√£y nh·ªõ 3 th√†nh ph·∫ßn c·ªët l√µi: B·ªô n√£o (CPU), N∆°i l√†m vi·ªác (B·ªô nh·ªõ ch√≠nh), v√† C·ªïng giao ti·∫øp (I/O)." },
                { question: "Th√†nh ph·∫ßn n√†o trong CPU ch·ªãu tr√°ch nhi·ªám th·ª±c hi·ªán c√°c ph√©p to√°n s·ªë h·ªçc v√† logic?", options: ["Control Unit", "Registers", "ALU (Arithmetic Logic Unit)", "Program Counter"], answer: 2, tip: "'Arithmetic' l√† s·ªë h·ªçc, 'Logic' l√† logic. ALU ch√≠nh l√† vi·∫øt t·∫Øt c·ªßa hai ch·ª©c nƒÉng n√†y." },
                { question: "Thanh ghi (Register) n√†o trong CPU gi·ªØ ƒë·ªãa ch·ªâ c·ªßa l·ªánh k·∫ø ti·∫øp s·∫Ω ƒë∆∞·ª£c th·ª±c thi?", options: ["Instruction Register (IR)", "Data Register (DR)", "Program Counter (PC)", "Accumulator (AC)"], answer: 2, tip: "'Program Counter' gi·ªëng nh∆∞ m·ªôt ng∆∞·ªùi 'ƒë·∫øm' xem ch∆∞∆°ng tr√¨nh ƒë√£ ch·∫°y ƒë·∫øn d√≤ng l·ªánh n√†o." },
                { question: "ƒê·∫∑c ƒëi·ªÉm n√†o ph√¢n bi·ªát RAM v·ªõi ROM?", options: ["RAM l√† b·ªô nh·ªõ kh√¥ng kh·∫£ bi·∫øn (non-volatile)", "RAM c√≥ th·ªÉ ƒë·ªçc v√† ghi, c√≤n ROM ch·ªß y·∫øu ch·ªâ ƒë·ªÉ ƒë·ªçc", "RAM ch·∫≠m h∆°n ROM", "ROM ƒë∆∞·ª£c d√πng l√†m b·ªô nh·ªõ ch√≠nh cho c√°c ·ª©ng d·ª•ng"], answer: 1, tip: "RAM (Random Access Memory) l√† b·ªô nh·ªõ truy c·∫≠p ng·∫´u nhi√™n, cho ph√©p c·∫£ ƒë·ªçc v√† ghi. ROM (Read-Only Memory) l√† b·ªô nh·ªõ ch·ªâ ƒë·ªçc." },
                { question: "M·ª•c ƒë√≠ch ch√≠nh c·ªßa b·ªô nh·ªõ ƒë·ªám (Cache Memory) l√† g√¨?", options: ["L∆∞u tr·ªØ vƒ©nh vi·ªÖn h·ªá ƒëi·ªÅu h√†nh", "TƒÉng t·ªëc ƒë·ªô truy c·∫≠p ƒë·∫øn d·ªØ li·ªáu th∆∞·ªùng d√πng t·ª´ b·ªô nh·ªõ ch√≠nh", "Thay th·∫ø ho√†n to√†n b·ªô nh·ªõ RAM", "K·∫øt n·ªëi c√°c thi·∫øt b·ªã ngo·∫°i vi"], answer: 1, tip: "Cache gi·ªëng nh∆∞ m·ªôt ngƒÉn t·ªß nh·ªè ch·ª©a nh·ªØng m√≥n ƒë·ªì b·∫°n hay d√πng nh·∫•t ƒë·ªÉ l·∫•y cho nhanh, thay v√¨ ph·∫£i v√†o kho l·ªõn (RAM) ƒë·ªÉ t√¨m." },
                { question: "H·ªá th·ªëng Bus trong m√°y t√≠nh bao g·ªìm ba lo·∫°i ch√≠nh n√†o?", options: ["USB, FireWire, HDMI", "Serial, Parallel, Optical", "Data Bus, Address Bus, Control Bus", "Internal, External, System"], answer: 2, tip: "H√£y t∆∞·ªüng t∆∞·ª£ng m·ªôt con ƒë∆∞·ªùng 3 l√†n: m·ªôt l√†n ch·ªü ƒë·ªãa ch·ªâ (Address), m·ªôt l√†n ch·ªü d·ªØ li·ªáu (Data), v√† m·ªôt l√†n cho t√≠n hi·ªáu ƒë√®n giao th√¥ng (Control)." },
                { question: "Chu k·ª≥ m√°y (Machine Cycle) c·ªßa CPU bao g·ªìm ba pha c∆° b·∫£n n√†o theo ƒë√∫ng th·ª© t·ª±?", options: ["Decode, Fetch, Execute", "Fetch, Execute, Decode", "Fetch, Decode, Execute", "Execute, Fetch, Decode"], answer: 2, tip: "Quy tr√¨nh h·ª£p l√Ω: L·∫•y l·ªánh (Fetch), Hi·ªÉu l·ªánh (Decode), r·ªìi m·ªõi l√†m theo l·ªánh (Execute)." },
                { question: "Ki·∫øn tr√∫c m√°y t√≠nh n√†o s·ª≠ d·ª•ng m·ªôt t·∫≠p l·ªánh l·ªõn v√† ph·ª©c t·∫°p?", options: ["RISC (Reduced Instruction Set Computer)", "MIMD", "CISC (Complex Instruction Set Computer)", "SIMD"], answer: 2, tip: "C trong CISC l√† vi·∫øt t·∫Øt c·ªßa 'Complex' (ph·ª©c t·∫°p)." },
                { question: "K·ªπ thu·∫≠t n√†o cho ph√©p CPU x·ª≠ l√Ω g·ªëi ƒë·∫ßu c√°c pha c·ªßa nhi·ªÅu l·ªánh kh√°c nhau c√πng m·ªôt l√∫c ƒë·ªÉ tƒÉng hi·ªáu su·∫•t?", options: ["Parallel Processing", "Pipelining", "DMA", "Multitasking"], answer: 1, tip: "Pipelining gi·ªëng nh∆∞ m·ªôt d√¢y chuy·ªÅn l·∫Øp r√°p, m·ªói c√¥ng ƒëo·∫°n x·ª≠ l√Ω m·ªôt s·∫£n ph·∫©m kh√°c nhau, gi√∫p tƒÉng t·ªïng s·∫£n l∆∞·ª£ng." },
                { question: "Ph∆∞∆°ng ph√°p n√†o cho ph√©p m·ªôt thi·∫øt b·ªã I/O t·ªëc ƒë·ªô cao truy·ªÅn d·ªØ li·ªáu tr·ª±c ti·∫øp v·ªõi b·ªô nh·ªõ ch√≠nh m√† kh√¥ng c·∫ßn s·ª± can thi·ªáp c·ªßa CPU?", options: ["Programmed I/O", "Interrupt-driven I/O", "DMA (Direct Memory Access)", "Memory-mapped I/O"], answer: 2, tip: "DMA l√† 'truy c·∫≠p b·ªô nh·ªõ tr·ª±c ti·∫øp', nghƒ©a l√† ƒëi th·∫≥ng ƒë·∫øn b·ªô nh·ªõ m√† kh√¥ng c·∫ßn qua 'trung gian' CPU." }
            ];
            questionBank.push(...sampleQuestions);
            while (questionBank.length < 100) {
                const index = questionBank.length + 1;
                questionBank.push({ question: `ƒê√¢y l√† c√¢u h·ªèi v√≠ d·ª• s·ªë ${index}.`, options: [`ƒê√°p √°n A c·ªßa c√¢u ${index}`, `ƒê√°p √°n B`, `ƒê√°p √°n C`, `ƒê√°p √°n D`], answer: Math.floor(Math.random() * 4), tip: `ƒê√¢y l√† m·∫πo ghi nh·ªõ cho c√¢u h·ªèi ${index}.`});
            }

            // --- Logic cho TAB ---
            const tabLinks = document.querySelectorAll('.tab-link');
            const tabContents = document.querySelectorAll('.tab-content');

            tabLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const tabId = link.dataset.tab;

                    tabLinks.forEach(item => item.classList.remove('active'));
                    tabContents.forEach(item => {
                        item.classList.remove('active');
                        item.classList.add('hidden');
                    });

                    link.classList.add('active');
                    const activeTab = document.getElementById(tabId);
                    activeTab.classList.add('active');
                    activeTab.classList.remove('hidden');
                });
            });

            // --- Logic cho Quiz ---
            const startScreen = document.getElementById('start-screen');
            const quizScreen = document.getElementById('quiz-screen');
            const resultsScreen = document.getElementById('results-screen');
            
            const startCustomBtn = document.getElementById('start-custom-quiz-btn');
            const questionCountInput = document.getElementById('question-count-input');
            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');
            const restartBtn = document.getElementById('restart-btn');

            const progressText = document.getElementById('progress-text');
            const questionText = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const feedbackContainer = document.getElementById('feedback-container');
            const scoreText = document.getElementById('score-text');
            const resultsDetails = document.getElementById('results-details');

            let currentQuestions = [];
            let currentQuestionIndex = 0;
            let userAnswers = [];

            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            function startQuiz(questionCount) {
                shuffleArray(questionBank);
                currentQuestions = questionBank.slice(0, questionCount);
                currentQuestionIndex = 0;
                userAnswers = new Array(currentQuestions.length).fill(null);

                startScreen.classList.add('hidden');
                resultsScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');

                displayQuestion();
            }

            function displayQuestion() {
                feedbackContainer.innerHTML = '';
                optionsContainer.classList.remove('answered');
                nextBtn.classList.add('hidden');

                const question = currentQuestions[currentQuestionIndex];
                questionText.textContent = question.question;
                progressText.textContent = `C√¢u h·ªèi ${currentQuestionIndex + 1} / ${currentQuestions.length}`;
                optionsContainer.innerHTML = '';

                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.classList.add('option');
                    optionElement.textContent = option;
                    optionElement.dataset.index = index;
                    optionElement.addEventListener('click', () => selectOption(index));
                    optionsContainer.appendChild(optionElement);
                });
            }

            function selectOption(selectedIndex) {
                optionsContainer.classList.add('answered');
                const question = currentQuestions[currentQuestionIndex];
                const isCorrect = selectedIndex === question.answer;

                userAnswers[currentQuestionIndex] = {
                    question: question.question,
                    options: question.options,
                    tip: question.tip,
                    chosenAnswer: selectedIndex,
                    correctAnswer: question.answer
                };
                
                const allOptions = optionsContainer.querySelectorAll('.option');
                const selectedOption = allOptions[selectedIndex];

                if (isCorrect) {
                    selectedOption.classList.add('correct');
                } else {
                    selectedOption.classList.add('incorrect');
                    allOptions[question.answer].classList.add('correct');
                    feedbackContainer.innerHTML = `<div class="memory-tip">üí° M·∫πo ghi nh·ªõ: ${question.tip}</div>`;
                }

                if (currentQuestionIndex < currentQuestions.length - 1) {
                    nextBtn.classList.remove('hidden');
                } else {
                    submitBtn.textContent = 'Xem K·∫øt Qu·∫£';
                }
            }

            function handleNextQuestion() {
                currentQuestionIndex++;
                displayQuestion();
                if (currentQuestionIndex === currentQuestions.length - 1) {
                    nextBtn.classList.add('hidden');
                }
            }
            
            function showResults() {
                quizScreen.classList.add('hidden');
                resultsScreen.classList.remove('hidden');
                
                let score = 0;
                resultsDetails.innerHTML = '';

                for(let i=0; i < userAnswers.length; i++){
                    const answerData = userAnswers[i];
                    if(!answerData) continue;

                    const isCorrect = answerData.chosenAnswer === answerData.correctAnswer;
                    if(isCorrect) score++;

                    const resultItem = document.createElement('div');
                    resultItem.classList.add('result-item');
                    
                    const chosenText = answerData.options[answerData.chosenAnswer];
                    const correctText = answerData.options[answerData.correctAnswer];
                    
                    let answerHtml = `<p class="user-answer incorrect">B·∫°n ch·ªçn: ${chosenText}</p>
                                      <p class="correct-answer">ƒê√°p √°n ƒë√∫ng: ${correctText}</p>
                                      <div class="memory-tip">üí° M·∫πo ghi nh·ªõ: ${answerData.tip}</div>`;
                    if(isCorrect){
                        answerHtml = `<p class="user-answer correct">B·∫°n ch·ªçn: ${chosenText}</p>`;
                    }

                    resultItem.innerHTML = `<p><strong>C√¢u ${i+1}:</strong> ${answerData.question}</p>${answerHtml}`;
                    resultsDetails.appendChild(resultItem);
                }

                const answeredCount = userAnswers.filter(a => a !== null).length;
                scoreText.textContent = `B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${score} / ${answeredCount} c√¢u!`;
                submitBtn.textContent = 'N·ªôp b√†i';
            }
            
            startCustomBtn.addEventListener('click', () => {
                const count = parseInt(questionCountInput.value);
                if (isNaN(count) || count < 1 || count > 100) {
                    alert('Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá t·ª´ 1 ƒë·∫øn 100.');
                    return;
                }
                startQuiz(count);
            });

            nextBtn.addEventListener('click', handleNextQuestion);
            submitBtn.addEventListener('click', () => {
                if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën k·∫øt th√∫c b√†i l√†m v√† xem k·∫øt qu·∫£ kh√¥ng?')) {
                    showResults();
                }
            });
            restartBtn.addEventListener('click', () => {
                resultsScreen.classList.add('hidden');
                startScreen.classList.remove('hidden');
            });
            
            // Set initial hidden state for practice tab
            document.getElementById('practice').classList.add('hidden');
        });
    </script>
</body>
</html>
